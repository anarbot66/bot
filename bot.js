require('dotenv').config();
const TelegramBot = require('node-telegram-bot-api');
const express = require('express');

const token = process.env.TELEGRAM_BOT_TOKEN;
const bot = new TelegramBot(token, { polling: true });

const app = express();
const PORT = process.env.PORT || 3000;

// Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ ÐºÐ°ÑÑ‚Ð¾Ð¼Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ ÐºÐ¾Ð¼Ð°Ð½Ð´
bot.setMyCommands([
  { command: "app", description: "ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ POLE", web_app: { url: "https://pole-cwd8.onrender.com/" } }
]);

// ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ /start
bot.onText(/\/start/, (msg) => {
  bot.sendMessage(msg.chat.id, "ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² POLE ðŸš€\n\nÐ˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ Ð¼ÐµÐ½ÑŽ Ð² Telegram, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Mini App.");
});

// Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ ÑÐµÑ€Ð²ÐµÑ€ Express
app.listen(PORT, () => {
  console.log(`Server is running on port ${PORT}`);
});
